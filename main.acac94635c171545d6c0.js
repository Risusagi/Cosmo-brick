!function(e){var t={};function i(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(s,n,function(t){return e[t]}.bind(null,n));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=1)}([function(e,t,i){},function(e,t,i){"use strict";i.r(t);i(0);function s(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var n=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.width=200,this.height=18,this.y=t.height-this.height,this.maxSpeed=40,this.speed=0,this.gameWidth=t.width,this.game=t,this.reset()}var t,i,n;return t=e,(i=[{key:"draw",value:function(e){e.fillStyle="#ddd",e.fillRect(this.x,this.y,this.width,this.height),e.fillStyle="black",e.fillRect(this.x+10,this.y+5,this.width-20,this.height-10)}},{key:"reset",value:function(){this.x=this.game.width/2-this.width/2}},{key:"update",value:function(e){this.x+=this.speed/e,this.x<0&&(this.x=0),this.x+this.width>this.gameWidth&&(this.x=this.gameWidth-this.width)}},{key:"moveLeft",value:function(){this.speed=-this.maxSpeed}},{key:"moveRight",value:function(){this.speed=this.maxSpeed}},{key:"stop",value:function(){this.speed=0}},{key:"shrink",value:function(){this.width>110&&(this.width-=30,this.x+=10)}},{key:"expand",value:function(){this.width<350&&(this.width+=30,this.x-=10)}}])&&s(t.prototype,i),n&&s(t,n),e}();var h=function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),window.addEventListener("keydown",function(e){var s=e.keyCode;if(37===s)t.moveLeft();else if(39===s)t.moveRight();else if(32===s&&"start-page"!==i.gameState)i.togglePause();else if(13===s){if(i.ball.y+i.ball.size===t.y&&i.ball.setSpeed(i.level),"running"===i.gameState)return;"start-page"===i.gameState&&i.startDropping(),i.gameState="running"}}),window.addEventListener("keyup",function(e){var i=e.keyCode;37===i||t.speed<0?t.stop():(39===i||t.speed>0)&&t.stop()})};function a(e,t){var i=e.y+e.size,s=e.y,n=t.y,h=t.y+t.height,a=t.x,r=a+t.width;return i>=n&&s<=h&&e.x+e.size>=a&&e.x<=r}function r(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.img=document.querySelector(".ball"),this.size=26,this.game=t,this.gameWidth=t.width,this.gameHeight=t.height,this.reset()}var t,i,s;return t=e,(i=[{key:"reset",value:function(){this.x=this.countX(),this.y=this.game.paddle.y-this.size}},{key:"setSpeed",value:function(e){this.previousSpeedX?(this.speedX=this.previousSpeedX,this.speedY=this.previousSpeedY):(this.speedX=-20*(1+e/10),this.speedY=-65*(1+e/10))}},{key:"countX",value:function(){return this.game.paddle.x+this.game.paddle.width/2-this.size/2}},{key:"stop",value:function(){this.speedX=0,this.speedY=0}},{key:"draw",value:function(e){e.drawImage(this.img,this.x,this.y,this.size,this.size)}},{key:"update",value:function(e){"running"===this.game.gameState&&(this.x+=this.speedX/e,this.y+=this.speedY/e),(this.x+this.size>this.gameWidth||this.x<0)&&(this.speedX=-this.speedX),this.y<0&&(this.speedY=-this.speedY),this.y>this.gameHeight&&this.game.handleLiveLoss(),this.y+this.size===this.game.paddle.y&&(this.x=this.countX()),a(this,this.game.paddle)&&(this.speedY=-this.speedY,this.y=this.game.paddle.y-this.size)}},{key:"decreaseSpeed",value:function(){this.timeChange=.6,Math.abs(this.speedY)>=25&&(this.speedX*=this.timeChange,this.speedY*=this.timeChange,this.finishTime=Date.now()+5e3)}},{key:"increaseSpeed",value:function(){this.timeChange=1.4,this.speedX*=this.timeChange,this.speedY*=this.timeChange,this.finishTime=Date.now()+5e3}},{key:"cancelChange",value:function(){this.speedY/=this.timeChange||1,this.speedX/=this.timeChange||1}},{key:"getSpeed",value:function(){this.previousSpeedX=this.speedX,this.previousSpeedY=this.speedY}},{key:"controlSpeedChange",value:function(e){"paused"===this.game.gameState&&(this.finishTime=this.finishTime||0,this.finishTime+=e),this.finishTime<=Date.now()&&(this.cancelChange(),delete this.timeChange,delete this.finishTime)}}])&&r(t.prototype,i),s&&r(t,s),e}();function l(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var u=function(){function e(t,i,s,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.img=t,this.x=i,this.y=5,this.size=50,this.game=n,this.index=s}var t,i,s;return t=e,(i=[{key:"draw",value:function(e){e.drawImage(this.img,this.x,this.y,this.size,this.size)}},{key:"update",value:function(e){this.index>=this.game.lives?this.y=-this.size:this.y=0}}])&&l(t.prototype,i),s&&l(t,s),e}();function d(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.img=document.querySelector(".live"),this.size=38,this.x=-this.size,this.y=100,this.speedY=0,this.game=t}var t,i,s;return t=e,(i=[{key:"reset",value:function(){this.x=Math.floor(Math.random()*(this.game.width-2*this.size))+this.size,this.y=100,this.speedY=10}},{key:"draw",value:function(e){e.drawImage(this.img,this.x,this.y,this.size,this.size)}},{key:"update",value:function(e){this.y+=this.speedY/e;var t=this.y+this.size,i=this.game.paddle.y,s=this.game.paddle.x,n=s+this.game.paddle.width;t>=i&&this.x>=s&&this.x+this.size<=n&&(this.game.lives<3&&this.game.lives++,this.x=-this.size)}},{key:"stop",value:function(){this.x=-this.size,this.speedY=0}}])&&d(t.prototype,i),s&&d(t,s),e}();function f(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var p=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.kinds=["snow","fire","shrink","expand"],this.game=t,this.speedY=0}var t,i,s;return t=e,(i=[{key:"draw",value:function(e){e.drawImage(this.img,this.x,this.y,this.width,this.height)}},{key:"reset",value:function(){this.x=Math.floor(Math.random()*(this.game.width-150))+75,this.y=100,this.speedY=10}},{key:"stop",value:function(){this.x=-this.width,this.speedY=0}},{key:"update",value:function(e){this.y+=this.speedY/e;var t=this.y+this.height,i=this.game.paddle.y,s=i+this.game.paddle.height,n=this.game.paddle.x,h=n+this.game.paddle.width;if(t>=i&&t<s+this.height&&this.x>=n&&this.x+this.width<=h){switch(this.type){case"snow":this.game.ball.decreaseSpeed();break;case"fire":this.game.ball.increaseSpeed();break;case"shrink":this.game.paddle.shrink();break;case"expand":this.game.paddle.expand()}this.x=-this.width}}},{key:"change",value:function(){var e=Math.floor(4*Math.random());switch(this.type=this.kinds[e],this.type){case"snow":this.img=document.querySelector(".snow");break;case"fire":this.img=document.querySelector(".fire");break;case"shrink":this.img=document.querySelector(".shrink");break;case"expand":this.img=document.querySelector(".expand")}switch(this.type){case"snow":case"fire":this.height=34,this.width=34;break;case"shrink":case"expand":this.height=24,this.width=60}}}])&&f(t.prototype,i),s&&f(t,s),e}();function g(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var y=function(){function e(t,i,s,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.width=75,this.height=35,this.x=i,this.y=s,this.game=t,this.strength=n}var t,i,s;return t=e,(i=[{key:"update",value:function(){a(this.game.ball,this)&&(this.game.hitted++,this.game.ball.speedY=-this.game.ball.speedY,this.game.points+=1,this.strength-=1,this.strength||(this.markForDeletion=!0))}},{key:"draw",value:function(e){switch(this.strength){case 5:e.fillStyle="#c70202",e.strokeStyle="#830202",this.innerStyle="#f90000";break;case 4:e.fillStyle="#c100c8",e.strokeStyle="#930098",this.innerStyle="#f600ff";break;case 3:e.fillStyle="#d86702",e.strokeStyle="#a83b00",this.innerStyle="#ff7800";break;case 2:e.fillStyle="#e6d600",e.strokeStyle="#b1a201",this.innerStyle="#ffff1a";break;case 1:e.fillStyle="#00aa11",e.strokeStyle="#007d0c",this.innerStyle="#3fff00"}e.fillRect(this.x,this.y,this.width,this.height),e.fillStyle=this.innerStyle,e.fillRect(this.x+3,this.y+3,this.width-6,this.height-6),e.strokeRect(this.x+5,this.y+5,this.width-10,this.height-10),e.lineWidth=1}}])&&g(t.prototype,i),s&&g(t,s),e}();function m(e,t){var i=[];return t.forEach(function(t,s){t.forEach(function(t,n){if(0!=t){var h=22+80*n,a=100+40*s;i.push(new y(e,h,a,t+Math.floor(5*Math.random())))}})}),i}var v=[[[1,1,0,0,1,1,1,1,0,0,1,1],[0,1,1,1,1,0,0,1,1,1,1,0],[1,1,1,1,1,1,1,1,1,1,1,1],[0,1,1,1,1,0,0,1,1,1,1,0],[1,1,0,0,1,1,1,1,0,0,1,1]],[[0,1,1,1,1,1,1,1,1,1,1,0],[1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,0,1,1,0,1,1,0,1,1],[1,1,1,1,1,1,1,1,1,1,1,1],[0,1,1,1,1,1,1,1,1,1,1,0]],[[0,1,1,0,1,1,1,1,0,1,1,0],[1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1],[0,1,1,1,1,1,1,1,1,1,1,0],[0,0,1,1,1,1,1,1,1,1,0,0]],[[1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,0,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1],[1,0,1,1,1,0,0,1,1,1,0,1]],[[0,1,1,0,1,1,1,1,0,1,1,0],[1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,0,1,0,1,1,1,1],[0,1,1,1,1,1,1,1,1,1,1,0],[0,0,1,1,1,1,1,1,1,1,0,0]],[[1,1,0,0,1,1,1,1,0,0,1,1],[0,1,1,1,1,1,1,1,1,1,1,0],[1,1,1,1,1,1,1,1,1,1,1,1],[0,1,1,1,1,1,1,1,1,1,1,0],[1,1,0,0,1,1,1,1,0,0,1,1],[1,1,1,1,1,1,1,1,1,1,1,1]]];function w(e){return function(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function b(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var k=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.width=t,this.height=i,this.gameState="start-page",this.paddle=new n(this),this.ball=new o(this),this.gameObjects=[],this.lives=3,this.points=0,this.level=4,this.hitter=0,this.fallingLive=new c(this),this.addition=new p(this),new h(this.paddle,this)}var t,i,s;return t=e,(i=[{key:"start",value:function(){this.bricks=m(this,v[this.level%6]);for(var e=document.querySelector(".live"),t=[],i=0;i<3;i++){var s=this.width-50*(i+1);t.push(new u(e,s,i,this))}this.addition.change(),this.gameObjects=[this.paddle,this.ball].concat(t)}},{key:"update",value:function(e){0===this.lives&&(this.gameState="game-over"),"paused"!==this.gameState&&"game-over"!==this.gameState&&([].concat(w(this.gameObjects),w(this.bricks)).forEach(function(t){return t.update(e)}),this.hitted>1&&(this.ball.speedY=-this.ball.speedY),this.hitted=0,this.bricks=this.bricks.filter(function(e){return!e.markForDeletion}),"running"===this.gameState&&0!==this.ball.speedY&&(this.fallingLive.update(e),this.addition.update(e)),0===this.bricks.length&&(this.ball.reset(),this.ball.stop(),this.level++,this.bricks=m(this,v[this.level%6])))}},{key:"draw",value:function(e){[].concat(w(this.gameObjects),w(this.bricks)).forEach(function(t){return t.draw(e)}),this.updatePoints(e),"running"===this.gameState&&this.ball.speedY&&(this.fallingLive.draw(e),this.addition.draw(e)),e.font="30px Roboto Mono",e.textAlign="center","game-over"===this.gameState?(this.coverScreen("rgba(0, 0, 0, 0.6)",e),this.writeText("GAME OVER",e),e.font=e.font="16px Roboto Mono",e.fillText("Earned points: ".concat(this.points),this.width/2,this.height/2+10)):"start-page"===this.gameState?(this.coverScreen("rgba(0, 0, 0, 0.3)",e),this.writeText("Press Enter to start a game",e)):"paused"===this.gameState&&(this.coverScreen("rgba(0, 0, 0, 0.5)",e),this.writeText("Press spacebar to continue",e))}},{key:"writeText",value:function(e,t){t.fillStyle="white",t.fillText(e,this.width/2,this.height/2-30)}},{key:"coverScreen",value:function(e,t){t.fillStyle=e,t.fillRect(0,0,this.width,this.height)}},{key:"togglePause",value:function(){"paused"===this.gameState?this.gameState="running":this.gameState="paused"}},{key:"updatePoints",value:function(e){e.textAlign="left",e.font="bold 20px Roboto Mono",e.fillStyle="white",e.fillText("Points: ".concat(this.points),10,30)}},{key:"startDropping",value:function(){var e=this;setInterval(function(){0===e.fallingLive.speedY&&e.fallingLive.reset()},9e4),setInterval(function(){0===e.addition.speedY&&(e.addition.change(),e.addition.reset())},4e4)}},{key:"handleLiveLoss",value:function(){this.lives--,this.lives>0&&(this.gameState="paused"),this.paddle.reset(),this.ball.reset(),this.ball.stop(),this.fallingLive.stop(),this.addition.stop()}}])&&b(t.prototype,i),s&&b(t,s),e}(),S=document.querySelector("canvas"),x=S.getContext("2d"),Y=S.width,z=S.height,T=new k(Y,z);T.start();var C=0;requestAnimationFrame(function e(t){var i=t-C;C=t,x.clearRect(0,0,Y,z),x.drawImage(document.querySelector(".background"),0,0,T.width,T.height),x.fillStyle="rgba(0, 0, 0, .3)",x.fillRect(0,0,T.width,T.height),T.update(i),T.draw(x),T.ball.controlSpeedChange(i),requestAnimationFrame(e)})}]);